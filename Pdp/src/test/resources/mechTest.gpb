# Textual policy representation for protocol buffers
name: "TestMechanismGPB"
description: "description..."
timestepSize: 10000000
triggerEvent: 
{
  action    : "testAction"
  isTry     : false
  parameter :  
  {
    name : "name1"
    value: "value1"
  } 
  parameter : 
  {
    name : "name2"
    value: "value2"
  }
  parameter : 
  {
    name : "name3"
    value: "value3"
  }  
}
condition: 
{
  or : 
  {
    or : 
    {
      before : 
      {
        timeAmount : 
        {
          amount : 5
          unit   : "MINUTES"
        }
        true   : {}
      }
      not : 
      {
        during : 
        {
          timeAmount : 
          {
            amount : 2
            unit   : "HOURS"
          }
          false : {}
        }
      }
    }
    or : {
      within : 
      {
        timeAmount :
        {
          amount : 11
          unit   : "SECONDS"
        }
        true : {}
      }
      and : 
      {
        implies :
        {
          since :
          {
            true : {}
            false : {}
          }
          always : 
          {
            false : {}
          }
        }
        eventMatch : 
        {
          action : "testAction"
          isTry  : false
          parameter :  
          {
            name : "name1"
            value: "value1"
          } 
          parameter: 
          {
            name : "name2"
            value: "value2"
          }        
        }
        
      }
    }
  }    
}
authorizationAction: 
{
  name  : "default"
  start : true
  authorization: 
  {
    allow  : true
    delay  : 1000
    modify : 
    {
      name : "param1"
      value: "modified1"
    }
    modify : 
    {
      name : "param2"
      value: "modified2"
    }
    executeSyncAction: 
    {
      name : "execSync1"
      parameter: 
      {
        name  : "execSyncParam1"
        value : "execSyncValue1"
      }
      parameter: 
      {
        name  : "execSyncParam2"
        value : "execSyncValue2"
      }
    }
    executeSyncAction: 
    {
      name: "execSync2"
      parameter: 
      {
        name  : "execSyncParam3"
        value : "execSyncValue3"
      }
      parameter: 
      {
        name  : "execSyncParam4"
        value : "execSyncValue4"
      }
    }    
  }
  fallback: 
  {
    name : "fallback1"
    authorization: 
    {
      allow  : false
      delay  : 999
      modify : 
      {
        name : "param3"
        value: "modified3"
      }
      modify : 
      {
        name : "param4"
        value: "modified4"
      }
      executeSyncAction: 
      {
        name : "execSyncFallback1"
        parameter: 
        {
          name : "execSyncFBParam1"
          value: "execSyncFBValue1"
        }
        parameter: 
        {
          name : "execSyncFBParam2"
          value: "execSyncFBValue2"
        }
      }
    }
  }
}
executeAsyncAction: 
{
  name : "execAsync1"
  parameter: 
  {
    name : "execParam1"
    value: "execValue1"
  }
  parameter: 
  {
    name : "execParam2"
    value: "execValue2"
  }
}
executeAsyncAction: 
{
  name : "execAsyncLog"
  parameter: 
  {
    name : "execParam3"
    value: "execValue3"
  }
  parameter: 
  {
    name : "execParam4"
    value: "execValue4"
  }
}