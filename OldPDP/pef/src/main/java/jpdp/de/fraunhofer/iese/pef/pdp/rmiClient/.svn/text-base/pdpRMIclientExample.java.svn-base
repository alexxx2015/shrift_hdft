package de.fraunhofer.iese.pef.pdp.rmiClient;

import java.rmi.Naming;
import java.rmi.RMISecurityManager;

import de.fraunhofer.iese.pef.pdp.internal.IPolicyDecisionPoint;

public class pdpRMIclientExample 
{

  public static void main(String[] args) 
  {
    String host="localhost";
    int port=9984;
    
    try
    {
      if(System.getSecurityManager()==null)
      {
        System.setSecurityManager(
          new RMISecurityManager()
          {
            public void checkConnect(String host, int port) {}
            public void checkConnect(String host, int port, Object context) {}
          }
        );
      }
      IPolicyDecisionPoint obj=(IPolicyDecisionPoint) Naming.lookup("rmi://" + host + ":" + port + "/pdpRMI");
      
      //System.out.println(obj.listDeployedMechanisms());
      System.out.println(obj.listDeployedMechanismsJNI());
     
      System.out.println(obj.pdpDeployPolicy("/home/rd/workspace/pef/src/main/xml/examples/ESBPolicies/initPol3.xml"));
    }
    catch(Exception e)
    {
      System.out.println("Exception occured: " + e.getMessage());
      e.printStackTrace();
    }
  }

}
